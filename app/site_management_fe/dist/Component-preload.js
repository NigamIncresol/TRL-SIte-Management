//@ui5-bundle com/trl/sitemanagementfe/Component-preload.js
sap.ui.predefine("com/trl/sitemanagementfe/Component", ["sap/ui/core/UIComponent","com/trl/sitemanagementfe/model/models"],(e,t)=>{"use strict";return e.extend("com.trl.sitemanagementfe.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(t.createDeviceModel(),"device");this.getRouter().initialize()}})});
sap.ui.predefine("com/trl/sitemanagementfe/controller/App.controller", ["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("com.trl.sitemanagementfe.controller.App",{onInit(){}})});
sap.ui.predefine("com/trl/sitemanagementfe/controller/Home.controller", ["sap/ui/core/mvc/Controller","sap/m/MessageToast"],function(e,n){"use strict";return e.extend("com.trl.sitemanagementfe.controller.Home",{onInit:function(){},onConfigurationPress:function(){this.getOwnerComponent().getRouter().navTo("RouteView1")},onProductionPress:function(){this.getOwnerComponent().getRouter().navTo("RouteView2")},onTemperaturePress:function(){this.getOwnerComponent().getRouter().navTo("RouteView3")}})});
sap.ui.predefine("com/trl/sitemanagementfe/controller/View1.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/m/MessageBox"],function(e,t,n,s){"use strict";return e.extend("com.trl.sitemanagementfe.controller.View1",{onInit:function(){this._initModel();this._loadDropdowns();this._setFieldsEditable(false);const e=this.getOwnerComponent().getRouter();e.getRoute("RouteView1").attachPatternMatched(this._onRouteMatched,this)},_onRouteMatched:function(){this._clearPage()},onAfterRendering:async function(){const e=this.getOwnerComponent().getModel();console.log("DEFAULT MODEL =>",e);console.log("MODEL CLASS =>",e?.getMetadata()?.getName())},onModeChange:function(e){const t=e.getParameter("selectedItem").getKey();const n=this.getView();this._clearForm();if(t==="create"){this._initModel();this.byId("linesContainer").destroyItems();this.byId("topName").setEditable(false);this.byId("customer").setEditable(true);this.byId("location").setEditable(true);this.byId("runnerId").setEditable(true);this.byId("lineCount").setEditable(true);this.byId("btnSave").setEnabled(true)}else if(t==="maintain"){const e=this.byId("topName");e.setEditable(true);e.setValue("");this.byId("btnSave").setEnabled(true);this._setFormReadOnly();this.byId("linesContainer").destroyItems();e.detachChange(this.onSiteIdChange);e.attachChange(this.onSiteIdChange.bind(this))}},_setFieldsEditable:function(e){const t=["topName","customer","location","runnerId","campaign","repairStatus","minorRepairStatus","lineCount"];t.forEach(t=>{const n=this.byId(t);if(n){n.setEditable(e)}});this.byId("btnSave").setEnabled(e);this.byId("linesContainer").getItems().forEach(t=>{t.setEditable(e)})},_setFormReadOnly:function(){const e=this.getView();this.byId("customer").setEditable(false);this.byId("location").setEditable(false);this.byId("runnerId").setEditable(false);this.byId("lineCount").setEditable(false);this.byId("topName").setEditable(true)},_setLinesReadOnly:function(){const e=this.byId("linesContainer");e.getItems().forEach(e=>{e.getContent().forEach(e=>{if(e.getItems){e.getItems().forEach(e=>{if(e.setEditable)e.setEditable(false);if(e.getItems){e.getItems().forEach(e=>{if(e.setEditable)e.setEditable(false)})}})}})})},_clearForm:function(){const e=this.getView();const t=e.getModel();this._initModel();this.byId("linesContainer").destroyItems();const n=this.byId("modeDropdown")?.getSelectedKey();if(n==="create"){this.byId("topName").setEditable(false);this.byId("customer").setEditable(true);this.byId("location").setEditable(true);this.byId("runnerId").setEditable(true);this.byId("lineCount").setEditable(true);this.byId("repairStatus").setEditable(true);this.byId("minorRepairStatus").setEditable(true)}else if(n==="maintain"){this.byId("topName").setEditable(true);this.byId("customer").setEditable(false);this.byId("location").setEditable(false);this.byId("runnerId").setEditable(false);this.byId("lineCount").setEditable(false);this.byId("repairStatus").setEditable(true);this.byId("minorRepairStatus").setEditable(true)}},_initModel:function(){const e={site_id:"",customer:"",location:"",runnerId:"",lineCount:0,lines:[]};this.getView().setModel(new t(e))},_loadDropdowns:function(){const e=this.getOwnerComponent().getModel();const t=e.bindList("/customerMaster");t.requestContexts().then(e=>{const t=e.map(e=>e.getObject());const n=new sap.ui.model.json.JSONModel({items:t});this.byId("customer").setModel(n,"customerModel");this.byId("customer").bindItems({path:"customerModel>/items",template:new sap.ui.core.Item({key:"{customerModel>customer_name}",text:"{customerModel>customer_name}"})})});const n=e.bindList("/locationMaster");n.requestContexts().then(e=>{const t=e.map(e=>e.getObject());const n=new sap.ui.model.json.JSONModel({items:t});this.byId("location").setModel(n,"locationModel");this.byId("location").bindItems({path:"locationModel>/items",template:new sap.ui.core.Item({key:"{locationModel>location_name}",text:"{locationModel>location_name}"})})})},onSiteIdChange:function(e){const t=e.getSource().getValue().trim();if(!t)return;this._previousMinorRepairStatus=null;this._oldStatus=null;const n=this.getOwnerComponent().getModel();const s=n.bindContext(`/siteMaster('${t}')`,null,{$expand:{productionLines:{$expand:{sensors:true}}}});s.requestObject().then(e=>{if(e){console.log("received data response",e);this.ExistingcampaignArray=(e.productionLines||[]).map(e=>({line_name:e.line_name,curr_campaign:e.curr_campaign,curr_repair_status:e.curr_repair_status,curr_minor_repair_status:e.curr_minor_repair_status}));const t=this.getView().getModel();t.setProperty("/site_id",e.site_id);t.setProperty("/customer",e.customer_name);t.setProperty("/location",e.location);t.setProperty("/runnerId",e.runner_id);t.setProperty("/lineCount",e.productionLines.length);this._renderProductionLines(e.productionLines,true)}else{sap.m.MessageToast.show("Site not found.");this._clearForm()}}).catch(()=>{sap.m.MessageToast.show("Site not found.");this._clearForm()})},onSiteIdValueHelp:function(){const e=this.getView();if(!this._oSiteVHDialog){this._oSiteVHDialog=new sap.m.SelectDialog({title:"Select Site ID",liveChange:e=>{this._onSiteSearch(e)},confirm:e=>{this._onSiteSelect(e)},cancel:e=>{e.getSource().close()},items:{path:"/sites",template:new sap.m.StandardListItem({title:"{site_id}",description:"{customer_name} - {location}"})}});e.addDependent(this._oSiteVHDialog)}const t=this.getOwnerComponent().getModel();const n=t.bindList("/siteMaster");n.requestContexts().then(e=>{const t=e.map(e=>e.getObject());const n=new sap.ui.model.json.JSONModel({sites:t});this._oSiteVHDialog.setModel(n);this._oSiteVHDialog.open()}).catch(e=>{sap.m.MessageToast.show("Failed to load Site IDs");console.error(e)})},_onSiteSearch:function(e){const t=e.getParameter("value");const n=new sap.ui.model.Filter("site_id",sap.ui.model.FilterOperator.Contains,t);e.getSource().getBinding("items").filter([n])},_onSiteSelect:function(e){const t=e.getSource();const n=e.getParameter("selectedItem");if(!n){t.close();return}const s=n.getTitle();const a=this.byId("topName");a.setValue(s);a.fireChange({value:s});t.close()},onRepairStatusChange:function(e){const t=e.getSource();const n=t.getSelectedKey();const s=this.getView().getModel();const a=s.getProperty("/repairStatus");s.setProperty("/repairStatus",n);const o=this.byId("minorRepairStatus");if(n==="major"){s.setProperty("/minorRepairStatus",0);o.setEditable(false);this._generateCampaignNo({customer_name:s.getProperty("/customer"),location:s.getProperty("/location"),runner_id:s.getProperty("/runnerId")});sap.m.MessageToast.show("Major repair, new campaign generated");this.byId("minorRepairStatus").setEditable(false)}else if(n==="minor"){o.setEditable(true);const e=s.getProperty("/minorRepairStatus");if(![1,2,3].includes(e)){s.setProperty("/minorRepairStatus",1)}if(this._oldStatus==="major"){this._generateCampaignNo({customer_name:s.getProperty("/customer"),location:s.getProperty("/location"),runner_id:s.getProperty("/runnerId")});sap.m.MessageToast.show("Minor repair, new campaign generated");this.byId("minorRepairStatus").setEditable(false)}}},onMinorRepairStatusChange:function(e){const t=this.getView().getModel();const a=t.getProperty("/repairStatus");if(a!=="minor")return;let o=parseInt(e.getSource().getValue(),10);let i=this._previousMinorRepairStatus;if(isNaN(o)){e.getSource().setValue(i);return}if(i===1&&o!==2){n.show("Minor Repair Status can only move from 1 → 2");e.getSource().setValue(1);t.setProperty("/minorRepairStatus",1);return}if(i===2&&o!==3){n.show("Minor Repair Status can only move from 2 → 3");e.getSource().setValue(2);t.setProperty("/minorRepairStatus",2);return}if(i===3){s.information("Minor Repair Status is 3. Please switch to Major Repair Status.");e.getSource().setValue(3);t.setProperty("/minorRepairStatus",3);return}t.setProperty("/minorRepairStatus",o)},_fetchLastCampaign:function(e){const t=this.getView().getModel();const n=`/odata/v4/site-management/getLastCampaignNo`+`(customer_name='${e.customer_name}',`+`location='${e.location}',`+`runner_id='${e.runner_id}')`;$.ajax({url:n,method:"GET",success:function(n){if(n&&n.campaign_no){console.log("Last campaign found:",n);if(n.repair_status=="major"||n.minor_repair_status=="3"){console.log("old one expired, generating new one");sap.m.MessageToast.show("New Campaign Number Generated.");this._generateCampaignNo(e)}else{console.log("existing one is valid, applying the same");sap.m.MessageToast.show("Existing Campaign Number Applied.");t.setProperty("/campaignNo",n.campaign_no);t.setProperty("/repairStatus",n.repair_status);t.setProperty("/minorRepairStatus",n.minor_repair_status+1)}}else{console.log("No previous campaign found - generating one");sap.m.MessageToast.show("New Campaign Number Generated.");this._generateCampaignNo(e)}}.bind(this),error:function(e){console.error("Error fetching last campaign",e)}})},_generateCampaignNo:function(){const e=this.getView().getModel();$.ajax({url:"/odata/v4/site-management/campaign",method:"POST",contentType:"application/json",data:JSON.stringify({}),success:function(t){console.log("Generated campaign number:",t.campaign_no);e.setProperty("/campaignNo",t.camp_no)},error:function(e){sap.m.MessageBox.error(e.responseJSON?.error?.message||"Failed to generate campaign number")}})},_patchCampaign:function(e,t,n,s){if(!t){sap.m.MessageToast.show("Campaign ID is required");return}const a={repair_status:n,minor_repair_status:s,site_site_id:e};console.log("PATCH Campaign Payload:",a);$.ajax({url:`/odata/v4/site-management/campaign(camp_no='${encodeURIComponent(t)}')`,method:"PATCH",contentType:"application/json",data:JSON.stringify(a),success:function(){},error:function(e){sap.m.MessageToast.show("Campaign update failed: "+(e.responseJSON?.error?.message||"Unknown Error"));console.error("Campaign PATCH Error:",e)}})},_stopCampaignForLine:function(e){s.confirm("Do you want to stop this campaign?",{onClose:t=>{if(t!==s.Action.OK)return;$.ajax({url:`/odata/v4/site-management/campaign(camp_no='${encodeURIComponent(e.campaign_no)}')`,method:"PATCH",contentType:"application/json",data:JSON.stringify({repair_status:"stopped"}),success:()=>{sap.m.MessageToast.show("Campaign stopped")},error:()=>{sap.m.MessageToast.show("Failed to stop campaign")}})}})},_shouldCreateNewCampaign:function(e,t){const n=this.ExistingcampaignArray?.find(t=>t.line_name===e);if(!n)return false;if(n.curr_repair_status==="major"&&n.curr_minor_repair_status===0){return true}if(n.curr_repair_status==="minor"&&n.curr_minor_repair_status===3){return true}if(n.curr_repair_status==="minor"){if(t!==n.curr_minor_repair_status+1){sap.m.MessageToast.show("Minor repair can increase only by 1");return"BLOCK"}}return false},onLineCountChange:function(e){const t=parseInt(e.getParameter("value"),10);if(isNaN(t)||t<=0){this.byId("linesContainer").destroyItems();this.getView().getModel().setProperty("/lines",[]);return}const n=[];for(let e=0;e<t;e++){n.push({line_name:"",no_of_spg_sensors:0,no_of_mudgun_sensors:0,sensors:[]})}this._renderProductionLines(n,false)},_renderProductionLines:function(e,t){const n=this.byId("linesContainer");const s=this.getView().getModel();n.destroyItems();const a=[];e.forEach((e,o)=>{const i=new sap.m.Panel({headerText:"House / Production Line - "+(o+1),expandable:true,expanded:true}).addStyleClass("whiteCard sapUiMediumMarginBottom");const r=new sap.m.Input({value:e.line_name||"",editable:!t,liveChange:e=>{s.setProperty(`/lines/${o}/line_name`,e.getParameter("value"))}});const c=new sap.m.Input({value:{path:`/lines/${o}/campaign/campaign_no`,mode:sap.ui.model.BindingMode.TwoWay},width:"100%",editable:!t});const u=new sap.m.Input({type:"Number",value:e.no_of_spg_sensors||0,editable:!t,change:this._handleSpgChange.bind(this,o)});const l=new sap.m.Input({type:"Number",value:e.no_of_mudgun_sensors||0,editable:!t,change:e=>{this._handleMudgunChange(o,e);const t=s.getData();const n=t.customer;const a=t.location;const i=t.runnerId;const u=r.getValue();this._getCampaignNumber(n,a,i,u).then(e=>{c.setValue(e);s.setProperty(`/lines/${o}/campaign/campaign_no`,e);sap.m.MessageToast.show(`Campaign generated: ${e}`)}).catch(()=>{sap.m.MessageToast.show("Error generating campaign number")})}});const m=new sap.m.HBox({wrap:"Wrap"});const p=new sap.m.HBox({wrap:"Wrap"});(e.sensors||[]).forEach(e=>{const t=new sap.m.Input({width:"80px",value:e.sensor_name,editable:false});e.sensor_type==="SPG"?m.addItem(t):p.addItem(t)});const d=new sap.ui.layout.Grid({defaultSpan:"L4 M6 S12",content:[new sap.m.VBox({items:[new sap.m.Label({text:"Line Name",design:"Bold"}),r]}),new sap.m.VBox({items:[new sap.m.Label({text:"No of SPG Sensors",design:"Bold"}),u,m]}),new sap.m.VBox({items:[new sap.m.Label({text:"No of Mudgun Sensors",design:"Bold"}),l,p]})]});const g=new sap.m.Input({type:"Number",value:e.curr_repair_status==="minor"?e.curr_minor_repair_status||1:0,width:"100%",editable:e.curr_repair_status==="minor",change:e=>{let t=parseInt(e.getParameter("value")||0,10);if(_.getSelectedKey()==="minor"){if(![1,2,3].includes(t)){sap.m.MessageToast.show("Minor repair count can only be 1, 2, or 3");t=1;g.setValue(t)}}else{t=0;g.setValue(0)}s.setProperty(`/lines/${o}/campaign/minor_repair_count`,t)}});const _=new sap.m.ComboBox({selectedKey:e.curr_repair_status||"",width:"100%",editable:true,selectionChange:async t=>{const n=t.getSource().getSelectedKey();const s=this.getView().getModel();const a=s.getData();const i=e.line_name;const r=this.ExistingcampaignArray?.find(e=>e.line_name===i);s.setProperty(`/lines/${o}/campaign/repair_status`,n);const c=r&&r.curr_repair_status==="major"&&n==="minor";const u=r&&r.curr_repair_status==="minor"&&n==="major";if(c||u){const e=await this._getCampaignNumber(a.customer,a.location,a.runnerId,i);s.setProperty(`/lines/${o}/campaign/campaign_no`,e);if(c){s.setProperty(`/lines/${o}/campaign/minor_repair_count`,1);g.setValue(1);g.setEditable(true)}else{s.setProperty(`/lines/${o}/campaign/minor_repair_count`,0);g.setValue(0);g.setEditable(false)}s.refresh(true);g.setEditable(n==="minor");sap.m.MessageToast.show(`New Campaign Generated: ${e}`);return}if(n==="minor"){g.setEditable(true);if(r?.curr_repair_status==="minor"){}else{}g.setValue(1);s.setProperty(`/lines/${o}/campaign/minor_repair_count`,1)}if(n==="major"){g.setValue(0);g.setEditable(false);s.setProperty(`/lines/${o}/campaign/minor_repair_count`,0)}},items:[new sap.ui.core.Item({key:"major",text:"Major"}),new sap.ui.core.Item({key:"minor",text:"Minor"})]});const h=new sap.m.Button({text:"Stop Campaign",type:"Reject",visible:true,press:()=>{sap.m.MessageBox.confirm("Are you sure you want to stop the campaign?",{onClose:e=>{if(e===sap.m.MessageBox.Action.OK){s.setProperty(`/lines/${o}/campaign/campaign_no`,"");s.setProperty(`/lines/${o}/campaign/repair_status`,"");s.setProperty(`/lines/${o}/campaign/minor_repair_count`,0);s.setProperty(`/lines/${o}/curr_campaign`,"");s.setProperty(`/lines/${o}/curr_repair_status`,"");s.setProperty(`/lines/${o}/curr_minor_repair_status`,0)}}})}});const f=new sap.ui.layout.Grid({defaultSpan:"L4 M6 S12",content:[new sap.m.VBox({items:[new sap.m.Label({text:"Campaign No",design:"Bold"}),c]}),new sap.m.VBox({items:[new sap.m.Label({text:"Repair Status",design:"Bold"}),_]}),new sap.m.VBox({items:[new sap.m.Label({text:"Minor Repair Status",design:"Bold"}),g]}),new sap.m.VBox({alignItems:"Start",justifyContent:"End",items:[h]})]}).addStyleClass("sapUiSmallMarginTop");i.addContent(new sap.m.VBox({items:[d,f]}).addStyleClass("sapUiSmallMargin"));n.addItem(i);a.push({id:e.ID||null,line_name:e.line_name||"",lineNameInput:r,spgCount:e.no_of_spg_sensors||0,mudgunCount:e.no_of_mudgun_sensors||0,spgSensors:[],mudgunSensors:[],spgBox:m,mudgunBox:p,campaign:{campaign_no:e.curr_campaign||"",repair_status:e.curr_repair_status||"",minor_repair_count:e.curr_minor_repair_status||0}})});s.setProperty("/lines",a)},_handleSpgChange:function(e,t){const n=parseInt(t.getParameter("value"),10);const s=this.getView().getModel();const a=s.getProperty("/lines")[e];const o=a.spgBox;o.destroyItems();const i=[];for(let e=0;e<n;e++){const t=new sap.m.Input({width:"80px",placeholder:"NAME "+(e+1),change:t=>{i[e]=t.getSource().getValue();a.spgSensors=i;s.refresh()}});i.push("");o.addItem(t)}a.spgCount=n},_handleMudgunChange:function(e,t){const n=parseInt(t.getParameter("value"),10);const s=this.getView().getModel();const a=s.getProperty("/lines")[e];const o=a.mudgunBox;o.destroyItems();const i=[];for(let e=0;e<n;e++){const t=new sap.m.Input({width:"80px",placeholder:"NAME "+(e+1),change:t=>{i[e]=t.getSource().getValue();a.mudgunSensors=i;s.refresh()}});i.push("");o.addItem(t)}a.mudgunCount=n},onSave:function(){const e=this.getView().getModel();const t=e.getData();const n=this.byId("modeSelector")?.getSelectedKey();const s={customer_name:t.customer,location:t.location,runner_id:t.runnerId,productionLines:[]};const a=[];(t.lines||[]).forEach(e=>{const n=e.campaign||{};const o={line_name:e.line_name,no_of_spg_sensors:e.spgCount,no_of_mudgun_sensors:e.mudgunCount,curr_campaign:n.campaign_no||null,curr_repair_status:n.repair_status||null,curr_minor_repair_status:n.minor_repair_count||0,sensors:[...(e.spgSensors||[]).map(e=>({sensor_name:e,sensor_type:"SPG"})),...(e.mudgunSensors||[]).map(e=>({sensor_name:e,sensor_type:"MUDGUN"}))]};s.productionLines.push(o);if(n?.campaign_no){a.push({campaign_no:n.campaign_no,repair_status:n.repair_status||null,minor_repair_count:n.minor_repair_count||0,site_id:t.site_id||null,start_date:n.start_date||null,end_date:n.end_date||null,isActive:n.isActive!==undefined?n.isActive:true,Status:n.Status||"Open",customer_name:t.customer,location:t.location,runner_id:t.runnerId,productionLineName:e.line_name})}});if(n==="create"){const e=this.getOwnerComponent().getModel();const t=e.bindList("/siteMaster");const n=t.create(s);n.created().then(()=>{sap.m.MessageToast.show("Site created successfully");const t=e.bindList("/campaign");a.forEach(e=>{const n=t.create(e);n.created().then(()=>{console.log("Campaign created:",e.campaign_no)}).catch(e=>{console.error("Error creating campaign:",e)})})}).catch(e=>{sap.m.MessageToast.show(e?.message||"Error while creating site");console.error(e)})}else if(n==="maintain"){(t.lines||[]).forEach(e=>{if(!e.id){console.warn("Skipping line without ID:",e);return}const n=e.campaign||{};const s=this.ExistingcampaignArray?.find(t=>t.line_name===e.line_name);const a=!s||s.curr_campaign!==n.campaign_no||s.curr_repair_status!==n.repair_status||s.curr_minor_repair_status!==n.minor_repair_count;if(!a){console.log("No change for line, skipping:",e.line_name);return}const o={curr_campaign:n.campaign_no||null,curr_repair_status:n.repair_status||null,curr_minor_repair_status:n.minor_repair_count||0};const i=this.getOwnerComponent().getModel();const r=i.bindContext(`/siteProductionLine('${e.id}')`);r.requestObject().then(()=>{const e=r.getBoundContext();Object.keys(o).forEach(t=>{e.setProperty(t,o[t])});return i.submitBatch(r.getUpdateGroupId())}).then(()=>{sap.m.MessageToast.show("Site Updated successfully");console.log("Production line updated:",e.line_name);if(n?.campaign_no){const s={campaign_no:n.campaign_no,repair_status:n.repair_status||null,minor_repair_count:n.minor_repair_count||0,site_id:t.site_id,start_date:n.start_date||null,end_date:n.end_date||null,isActive:n.isActive!==undefined?n.isActive:true,Status:n.Status||"Open",customer_name:t.customer,location:t.location,runner_id:t.runnerId,productionLineName:e.line_name};const a=i.bindList("/campaign");const o=a.create(s);o.created().then(()=>console.log("Campaign created:",s.campaign_no)).catch(e=>console.error("Error creating campaign:",e))}}).catch(t=>{console.error("Error updating production line:",e.line_name,t)})})}},onReset:function(){s.confirm("Reset all fields?",{onClose:e=>{if(e==="OK"){this._initModel();this.byId("linesContainer").destroyItems();n.show("Reset Completed")}}})},_getCampaignNumber:function(e,t,n,s){const a=this.getOwnerComponent().getModel();const o=`/generateCampaignNumber(`+`customer_name='${e}',`+`location='${t}',`+`runner_id='${n}',`+`line_name='${s}')`;const i=a.bindContext(o);return i.requestObject().then(e=>e?.value||"").catch(e=>{console.error("Error generating campaign number",e);throw e})},_clearPage:function(){this.getView().getModel().setData(this._getEmptyData());this.byId("modeSelector").setSelectedKey("");this.byId("topName").setValue("");this.byId("customer").setSelectedKey("");this.byId("location").setSelectedKey("");this.byId("runnerId").setValue("");this.byId("lineCount").setValue("");this.byId("linesContainer").removeAllItems();this._setFieldsEditable(false)},_getEmptyData:function(){return{site_id:"",customer:"",location:"",runnerId:"",lineCount:"",mode:""}},onNavToHome:function(){const e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("Home")}})});
sap.ui.predefine("com/trl/sitemanagementfe/controller/View2.controller", ["sap/ui/core/mvc/Controller","sap/m/Panel","sap/m/HBox","sap/m/VBox","sap/m/Input","sap/m/Label","sap/m/MessageToast","sap/ui/layout/Grid","sap/ui/model/json/JSONModel","sap/ui/core/CustomData","sap/m/MessageBox"],function(e,t,o,s,i,n,a,r,c,d,l){"use strict";let u;return e.extend("com.trl.sitemanagementfe.controller.View2",{onInit:function(){u=this.getOwnerComponent().getModel();const e=this.getOwnerComponent().getRouter();e.getRoute("RouteView2").attachPatternMatched(this._onRouteMatched,this);this.getView().setModel(new c,"view");this._isExistingDailyProduction=false},_onRouteMatched:function(){this._clearPage()},onAfterRendering:function(){this.getISTDate()},getISTDate:function(){const e=new Date;const t=5.5*60*60*1e3;const o=new Date(e.getTime()+t);this.byId("siteDate").setValue(o.toISOString().split("T")[0]);return o.toISOString().split("T")[0]},onSiteIdLiveChange:function(e){const t=e.getSource();t.setValue("");a.show("Please select Site ID using the value help",{duration:2e3})},onProdLineLiveChange:function(e){const t=e.getSource();t.setValue("");a.show("Please select Line name using the value help",{duration:2e3})},onSiteIdValueHelp:function(){const e=this.getView();if(!this._oSiteVHDialog){this._oSiteVHDialog=new sap.m.SelectDialog({title:"Select Site ID",liveChange:e=>{this._onSiteSearch(e)},confirm:e=>{this._onSiteSelect(e)},cancel:()=>{this._oSiteVHDialog.close()},items:{path:"/sites",template:new sap.m.StandardListItem({title:"{site_id}",description:"{customer_name} - {location}"})}});e.addDependent(this._oSiteVHDialog)}const t=u.bindList("/siteMaster");t.requestContexts().then(e=>{const t=e.map(e=>e.getObject());const o=new sap.ui.model.json.JSONModel({sites:t});this._oSiteVHDialog.setModel(o);this._oSiteVHDialog.open()}).catch(e=>{sap.m.MessageToast.show("Failed to load Site IDs");console.error(e)})},_onSiteSearch:function(e){const t=e.getParameter("value");const o=new sap.ui.model.Filter("site_id",sap.ui.model.FilterOperator.Contains,t);e.getSource().getBinding("items").filter([o])},_onSiteSelect:function(e){this.byId("ProductionLineId").setValue("");const t=e.getParameter("selectedItem");if(!t)return;const o=t.getTitle();const s=this.byId("siteId");s.setValue(o);this._oSiteVHDialog.close()},onProdLineValueHelp:function(){let e=this.byId("siteId").getValue();if(!e){sap.m.MessageToast.show("Please select a Site ID !");return}const t=this.getView();if(!this._oProdVHDialog){this._oProdVHDialog=new sap.m.SelectDialog({title:"Select Production Line",liveChange:e=>{this._onProdLineSearch(e)},confirm:e=>{this._onProdLineSelect(e)},cancel:()=>{this._oProdVHDialog.close()},items:{path:"/prods",template:new sap.m.StandardListItem({title:"{line_name}",description:"Site ID : {site_site_id}"})}});t.addDependent(this._oProdVHDialog)}const o=u.bindContext(`/siteMaster(site_id='${e}')`,null,{$expand:{productionLines:true}});o.requestObject().then(e=>{console.log("received production data",e.productionLines);this.siteMasterCompleteData=e;const t=e.productionLines||[];const o=new sap.ui.model.json.JSONModel({prods:t});this._oProdVHDialog.setModel(o);this._oProdVHDialog.open()}).catch(e=>{sap.m.MessageToast.show("Failed to load production lines.");console.error(e)})},_onProdLineSearch:function(e){const t=e.getParameter("value");const o=new sap.ui.model.Filter("line_name",sap.ui.model.FilterOperator.Contains,t);e.getSource().getBinding("items").filter([o])},_onProdLineSelect:function(e){const t=e.getParameter("selectedItem");if(!t)return;const o=t.getTitle();const s=this.byId("ProductionLineId");s.setValue(o);this._oProdVHDialog.close()},onFindPress:async function(){const e=this.getView();let t=e.getModel("view");if(!t){t=new sap.ui.model.json.JSONModel;e.setModel(t,"view")}const o=e.byId("siteId").getValue().trim();const s=e.byId("ProductionLineId").getValue().trim();const i=e.byId("siteDate").getValue().trim();if(!o||!s||!i){sap.m.MessageToast.show("Please fill all required fields");return}const n=this.siteMasterCompleteData;t.setProperty("/siteMaster",{customer_name:n.customer_name,location:n.location,runner_id:n.runner_id});const a=`/dailyProduction(`+`site_id='${o}',`+`productionLineName='${s}',`+`production_date=${i}`+`)`;const r=u.bindContext(a);try{const e=await r.requestObject();this._isExistingDailyProduction=true;const o=!!e.productionStageCompleted;t.setProperty("/isProductionEditable",!o);if(o){sap.m.MessageToast.show("Production stage already submitted. Editing disabled.")}else{sap.m.MessageToast.show("Existing production data found for the selected line/date")}this.renderProductionLine(n,e);this.byId("remark").setValue(e.remarks||"");t.setProperty("/campinfo",{campaign_no:e.curr_campaign||"",repair_status:e.curr_repair_status||"",minor_repair_status:e.curr_minor_repair_status||0})}catch(e){if(e?.status!==404){console.error("OData Error:",e);sap.m.MessageToast.show("Error fetching daily production data");return}sap.m.MessageToast.show("No production data found for the selected line/date");this._isExistingDailyProduction=false;t.setProperty("/isProductionEditable",true);this.renderProductionLine(n,null);const o=n.productionLines.find(e=>e.line_name===s);t.setProperty("/campinfo",o?{campaign_no:o.curr_campaign,repair_status:o.curr_repair_status,minor_repair_status:o.curr_minor_repair_status}:{campaign_no:"",repair_status:"",minor_repair_status:0});this.byId("remark").setValue("")}},renderProductionLine:function(e,t){const o=this.getView();const s=o.getModel("view");const i=o.byId("linesContainer");i.destroyItems();const n=o.byId("ProductionLineId").getValue().trim();const a=(e.productionLines||[]).find(e=>e.line_name===n);if(!a){sap.m.MessageToast.show("Production line not found");return}const r=true;const c=new sap.m.Panel({headerText:"Production Line : "+a.line_name,expandable:false,customData:[new sap.ui.core.CustomData({key:"lineId",value:a.ID})],content:[new sap.ui.layout.Grid({defaultSpan:"L4 M6 S12",hSpacing:1,vSpacing:1,content:[new sap.m.VBox({items:[new sap.m.Label({text:"Production Line Name"}),new sap.m.Input({value:a.line_name,editable:false})]}),new sap.m.VBox({items:[new sap.m.Label({text:"Production Data"}),new sap.m.Input({type:"Number",placeholder:"Enter production data",value:t?.production_data||"",editable:r})]}),new sap.m.VBox({items:[new sap.m.Label({text:"Erosion Data"}),new sap.m.Input({type:"Number",placeholder:"Enter erosion data",value:t?.erosion_data||"",editable:r})]})]})]});c.addStyleClass("sapUiSmallMarginBottom");i.addItem(c)},onSave:function(){const e=this.getView();const t=e.byId("siteId").getValue().trim();const o=e.byId("ProductionLineId").getValue().trim();const s=e.byId("siteDate").getValue().trim();const i=e.byId("remark").getValue();const n=e.getModel("view").getProperty("/campinfo");const a=e.byId("linesContainer").getItems()[0];if(!a){sap.m.MessageToast.show("No production data");return}const r=a.getContent()[0].getContent();const c=parseInt(r[1].getItems()[1].getValue(),10)||0;const d=parseInt(r[2].getItems()[1].getValue(),10)||0;const l={production_data:c,erosion_data:d,remarks:i,curr_campaign:n?.campaign_no||"",curr_repair_status:n?.repair_status||"",curr_minor_repair_status:n?.minor_repair_status||0};if(this._isExistingDailyProduction){const e=`/dailyProduction(`+`site_id='${t}',`+`productionLineName='${o}',`+`production_date=${s}`+`)`;const i=u.bindContext(e);i.requestObject().then(()=>{const e=i.getBoundContext();Object.keys(l).forEach(t=>{e.setProperty(t,l[t])});return u.submitBatch(i.getUpdateGroupId())}).then(()=>{sap.m.MessageToast.show("Production Data updated")}).catch(e=>{const t=e?.message||"Update failed";sap.m.MessageBox.error(t)})}else{const e={site_id:t,productionLineName:o,production_date:s,productionStageCompleted:false,...l};const i=u.bindList("/dailyProduction");const n=i.create(e);n.created().then(()=>{this._isExistingDailyProduction=true;sap.m.MessageToast.show("Production Data created")}).catch(e=>{const t=e?.message||"Create failed";sap.m.MessageBox.error(t)})}},onSubmit:function(){const e=this.getView();const t=e.getModel("view");const o=this.byId("siteId").getValue().trim();const s=this.byId("ProductionLineId").getValue().trim();const i=this.byId("siteDate").getValue().trim();if(!o||!s||!i){sap.m.MessageToast.show("Please fill all required fields");return}sap.m.MessageBox.confirm("Confirm submission? Changes will not be allowed after this.",{title:"Confirm Submission",actions:[sap.m.MessageBox.Action.YES,sap.m.MessageBox.Action.NO],emphasizedAction:sap.m.MessageBox.Action.YES,onClose:function(e){if(e!==sap.m.MessageBox.Action.YES){return}const n=this.getOwnerComponent().getModel();const a=`/dailyProduction(`+`site_id='${o}',`+`productionLineName='${s}',`+`production_date=${i}`+`)`;const r=n.bindContext(a);r.requestObject().then(()=>{const e=r.getBoundContext();e.setProperty("productionStageCompleted",true);return n.submitBatch(r.getUpdateGroupId())}).then(()=>{sap.m.MessageToast.show("Production submitted successfully");t.setProperty("/isProductionEditable",false)}).catch(e=>{let t="Submission failed";if(e?.message){t=e.message}sap.m.MessageBox.error(t);console.error(e)})}.bind(this)})},_clearPage:function(){const e=this.getView().getModel("view");e.setData(this._getEmptyViewData());this.byId("siteId").setValue("");this.byId("ProductionLineId").setValue("");this.byId("siteDate").setValue(null);this.byId("remark").setValue("");this.byId("linesContainer").removeAllItems()},_getEmptyViewData:function(){return{siteMaster:{customer_name:"",location:"",runner_id:""},campinfo:{campaign_no:"",repair_status:"",minor_repair_status:""},isProductionEditable:false}},onNavToHome:function(){const e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("Home")}})});
sap.ui.predefine("com/trl/sitemanagementfe/controller/View3.controller", ["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox","sap/ui/model/json/JSONModel","sap/m/Label","sap/m/Input","sap/m/VBox","sap/m/HBox","sap/m/Panel"],function(e,t,s,n,o,i,a,r,d){"use strict";let c;return e.extend("com.trl.sitemanagementfe.controller.View3",{onInit:function(){c=this.getOwnerComponent().getModel();const e={runnerId:"",campaignNo:"",repairStatus:"",minorRepairStatus:"",shift:"",productionLines:[],isSensorEditable:true};const t=new n(e);this.getView().setModel(t,"formData");this._isExistingSensorData=false;const s=this.getOwnerComponent().getRouter();s.getRoute("RouteView3").attachPatternMatched(this._onRouteMatched,this)},_onRouteMatched:function(){this._clearPage()},getISTDate:function(){const e=new Date;const t=5.5*60*60*1e3;return new Date(e.getTime()+t).toISOString().split("T")[0]},onSiteIdLiveChange:function(e){const s=e.getSource();s.setValue("");t.show("Please select Site ID using the value help",{duration:2e3})},onProdLineLiveChange:function(e){const s=e.getSource();s.setValue("");t.show("Please select Line name using the value help",{duration:2e3})},onSiteIdValueHelp:function(){const e=this.getView();if(!this._oSiteVHDialog){this._oSiteVHDialog=new sap.m.SelectDialog({title:"Select Site ID",liveChange:e=>{this._onSiteSearch(e)},confirm:e=>{this._onSiteSelect(e)},cancel:()=>{this._oSiteVHDialog.close()},items:{path:"/sites",template:new sap.m.StandardListItem({title:"{site_id}",description:"{customer_name} - {location}"})}});e.addDependent(this._oSiteVHDialog)}const t=c.bindList("/siteMaster");t.requestContexts().then(e=>{const t=e.map(e=>e.getObject());const s=new sap.ui.model.json.JSONModel({sites:t});this._oSiteVHDialog.setModel(s);this._oSiteVHDialog.open()}).catch(e=>{sap.m.MessageToast.show("Failed to load Site IDs");console.error(e)})},_onSiteSearch:function(e){const t=e.getParameter("value");const s=new sap.ui.model.Filter("site_id",sap.ui.model.FilterOperator.Contains,t);e.getSource().getBinding("items").filter([s])},_onSiteSelect:function(e){const t=e.getParameter("selectedItem");if(!t)return;const s=t.getTitle();const n=this.byId("siteId");n.setValue(s);this._oSiteVHDialog.close()},onProdLineValueHelp:function(){let e=this.byId("siteId").getValue();if(!e){sap.m.MessageToast.show("Please select a Site ID !");return}const t=this.getView();if(!this._oProdVHDialog){this._oProdVHDialog=new sap.m.SelectDialog({title:"Select Production Line",liveChange:e=>{this._onProdLineSearch(e)},confirm:e=>{this._onProdLineSelect(e)},cancel:()=>{this._oProdVHDialog.close()},items:{path:"/prods",template:new sap.m.StandardListItem({title:"{line_name}",description:"Site ID : {site_site_id}"})}});t.addDependent(this._oProdVHDialog)}const s=c.bindContext(`/siteMaster(site_id='${e}')`,null,{$expand:{productionLines:{$expand:{sensors:true}}}});s.requestObject().then(e=>{console.log("received whole site data",e);this.siteMasterCompleteData=e;const t=e.productionLines||[];const s=new sap.ui.model.json.JSONModel({prods:t});this._oProdVHDialog.setModel(s);this._oProdVHDialog.open()}).catch(e=>{sap.m.MessageToast.show("Failed to load production lines.");console.error(e)})},_onProdLineSearch:function(e){const t=e.getParameter("value");const s=new sap.ui.model.Filter("line_name",sap.ui.model.FilterOperator.Contains,t);e.getSource().getBinding("items").filter([s])},_onProdLineSelect:function(e){const t=e.getParameter("selectedItem");if(!t)return;const s=t.getTitle();const n=this.byId("ProductionLineId1");n.setValue(s);this._oProdVHDialog.close()},onFindPress:function(){const e=this.getView();const t=e.getModel("formData");const s=e.byId("siteId").getValue().trim();const n=e.byId("ProductionLineId1").getValue().trim();const o=e.byId("siteDate1").getValue().trim();const i=e.byId("shiftSelect").getSelectedKey()||"A";if(!s||!n||!o){sap.m.MessageToast.show("Please fill all required fields.");return}t.setProperty("/siteMaster",{});t.setProperty("/campinfo",{});if(this.siteMasterCompleteData){t.setProperty("/siteMaster",{customer_name:this.siteMasterCompleteData.customer_name||"",location:this.siteMasterCompleteData.location||"",runner_id:this.siteMasterCompleteData.runner_id||""})}const a=[new sap.ui.model.Filter("site_id","EQ",s),new sap.ui.model.Filter("productionLineName","EQ",n),new sap.ui.model.Filter("reading_date","EQ",o),new sap.ui.model.Filter("shift_code","EQ",i)];const r=c.bindList("/sensorReading",null,null,a);r.requestContexts().then(e=>{if(e.length>0){const s=e.map(e=>e.getObject());const o=s.some(e=>e.sensorStageCompleted===true);t.setProperty("/isSensorEditable",!o);this._isExistingSensorData=true;if(o){sap.m.MessageToast.show("Sensor stage already submitted. Editing disabled.")}else{sap.m.MessageToast.show("Existing sensor reading found for the selected line/shift/date")}const i=s[0];t.setProperty("/campinfo",{campaign_no:i.curr_campaign||"",repair_status:i.curr_repair_status||"",minor_repair_status:i.curr_minor_repair_status||0});this.renderSensorFieldFromMaster(n,s)}else{sap.m.MessageToast.show("No sensor reading found for the selected line/shift/date");const e=this.siteMasterCompleteData?.productionLines.find(e=>e.line_name===n);t.setProperty("/campinfo",{campaign_no:e?.curr_campaign||"",repair_status:e?.curr_repair_status||"",minor_repair_status:e?.curr_minor_repair_status||0});t.setProperty("/isSensorEditable",true);this._isExistingSensorData=false;this.renderSensorFieldFromMaster(n,[])}}).catch(e=>{sap.m.MessageToast.show(e?.message||"No readings found");const s=this.siteMasterCompleteData?.productionLines.find(e=>e.line_name===n);t.setProperty("/campinfo",{campaign_no:s?.curr_campaign||"",repair_status:s?.curr_repair_status||"",minor_repair_status:s?.curr_minor_repair_status||0});this.renderSensorFieldFromMaster(n,[])})},renderSensorFieldFromMaster:function(e,t=[]){const s=this.getView();const n=s.getModel("formData");const o=s.byId("linesContainer");o.destroyItems();n.setProperty("/productionLines",[]);if(!this.siteMasterCompleteData?.productionLines)return;const i=this.siteMasterCompleteData.productionLines.filter(t=>t.line_name===e);i.forEach(e=>{const s={line_name:e.line_name,sensors:[]};const i=new sap.m.Panel({headerText:"Production Line : "+e.line_name,expandable:true,expanded:true});const a=new sap.ui.layout.Grid({defaultSpan:"L6 M6 S12",hSpacing:2,width:"100%"});const r=new sap.m.Panel({headerText:"SPG SENSOR",class:"whiteCard",width:"100%"});const d=new sap.m.VBox;r.addContent(d);const c=new sap.m.Panel({headerText:"MUDGUN SENSOR",class:"whiteCard",width:"100%"});const l=new sap.m.VBox;c.addContent(l);e.sensors.forEach(e=>{const n=t.find(t=>t.sensor_name===e.sensor_name);const o={sensorId:e.ID,sensor_name:e.sensor_name,sensor_type:e.sensor_type,reading:n?n.reading:""};s.sensors.push(o);const i=new sap.m.HBox({justifyContent:"SpaceBetween",class:"sapUiSmallMarginBottom",items:[new sap.m.Label({text:e.sensor_name}).addStyleClass("sapUiTinyMarginTop"),new sap.m.Input({type:"Number",width:"100px",placeholder:"Reading...",value:o.reading,liveChange:e=>{o.reading=e.getParameter("value")}})]});if(e.sensor_type==="SPG")d.addItem(i);else if(e.sensor_type==="MUDGUN")l.addItem(i)});a.addContent(r);a.addContent(c);i.addContent(a);i.addStyleClass("sapUiSmallMarginBottom");o.addItem(i);n.getProperty("/productionLines").push(s)});n.refresh(true)},onSave:function(){const e=this.getView();const t=e.getModel("formData");const s=t.getData();const n=e.byId("siteId").getValue().trim();const o=e.byId("ProductionLineId1").getValue().trim();const i=e.byId("siteDate1").getValue().trim();const a=e.byId("shiftSelect").getSelectedKey()||"A";if(!n||!o||!i){sap.m.MessageToast.show("Please fill all required fields.");return}if(!s.productionLines?.length){sap.m.MessageToast.show("No sensors to save");return}s.productionLines.forEach(e=>{if(e.line_name!==o){return}(e.sensors||[]).forEach(e=>{if(e.reading===""||e.reading==null){return}const t={site_id:n,productionLineName:o,reading_date:i,shift_code:a,sensor_name:e.sensor_name,reading:Number(e.reading),curr_campaign:s.campinfo?.campaign_no||"",curr_repair_status:s.campinfo?.repair_status||"",curr_minor_repair_status:s.campinfo?.minor_repair_status??0};if(this._isExistingSensorData){const s=`/sensorReading(`+`site_id='${t.site_id}',`+`productionLineName='${t.productionLineName}',`+`reading_date='${t.reading_date}',`+`shift_code='${t.shift_code}',`+`sensor_name='${t.sensor_name}'`+`)`;const n=c.bindContext(s);n.requestObject().then(()=>{const e=n.getBoundContext();Object.keys(t).forEach(s=>{e.setProperty(s,t[s])});return c.submitBatch(n.getUpdateGroupId())}).then(()=>{console.log("Updated sensor:",e.sensor_name)}).catch(t=>{console.error(t);sap.m.MessageToast.show("Update failed for "+e.sensor_name)})}else{const s=c.bindList("/sensorReading");const n=s.create(t);n.created().then(()=>{console.log("Created sensor:",e.sensor_name)}).catch(t=>{console.error(t);sap.m.MessageToast.show("Create failed for "+e.sensor_name)})}})});sap.m.MessageToast.show("Sensor readings saved successfully")},onSubmit:function(){s.confirm("Confirm submission? Changes will not be allowed after this.",{title:"Confirm Submission",actions:[s.Action.YES,s.Action.NO],emphasizedAction:s.Action.YES,onClose:function(e){if(e===s.Action.YES){this.markSensorStageCompleted()}}.bind(this)})},markSensorStageCompleted:function(){const e=this.getView();const t=e.getModel("formData");const s=t.getData();const n=e.byId("siteId").getValue().trim();const o=e.byId("ProductionLineId1").getValue().trim();const i=e.byId("siteDate1").getValue().trim();const a=e.byId("shiftSelect").getSelectedKey()||"A";if(!n||!o||!i){sap.m.MessageToast.show("Missing required fields");return}const r=[];s.productionLines.forEach(e=>{if(e.line_name!==o){return}(e.sensors||[]).forEach(e=>{const t=`/sensorReading(`+`site_id='${n}',`+`productionLineName='${o}',`+`reading_date='${i}',`+`shift_code='${a}',`+`sensor_name='${e.sensor_name}'`+`)`;const s=c.bindContext(t);const d=s.requestObject().then(()=>{const e=s.getBoundContext();e.setProperty("sensorStageCompleted",true);return c.submitBatch(s.getUpdateGroupId())}).then(()=>{console.log("Sensor submitted:",e.sensor_name)}).catch(t=>{console.error(t);sap.m.MessageToast.show("Submission failed for "+e.sensor_name)});r.push(d)})});Promise.allSettled(r).then(()=>{sap.m.MessageToast.show("Sensor stage submitted successfully");t.setProperty("/isSensorEditable",false);t.refresh()})},_clearPage:function(){const e=this.getView().getModel("formData");e.setData(this._getEmptyFormData());this.byId("siteId").setValue("");this.byId("ProductionLineId1").setValue("");this.byId("siteDate1").setValue(null);this.byId("shiftSelect").setSelectedKey("");this.byId("linesContainer").removeAllItems()},_getEmptyFormData:function(){return{shift:"",siteMaster:{customer_name:"",location:"",runner_id:""},campinfo:{campaign_no:"",repair_status:"",minor_repair_status:""},isSensorEditable:false}},onNavToHome:function(){const e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("Home")}})});
sap.ui.predefine("com/trl/sitemanagementfe/model/models", ["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
sap.ui.require.preload({
	"com/trl/sitemanagementfe/i18n/i18n.properties":'# This is the resource bundle for com.trl.sitemanagementfe\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Site Management\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n#XTIT: Main view title\ntitle=Site Management',
	"com/trl/sitemanagementfe/manifest.json":'{"_version":"1.76.0","sap.app":{"id":"com.trl.sitemanagementfe","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.20.0","toolsId":"7122c3cd-9c00-4da8-ab2e-45e59147a8ec"},"dataSources":{"mainService":{"uri":"/odata/v4/site-management/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.143.2","libs":{"sap.m":{},"sap.ui.core":{},"sap.f":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"":{"dataSource":"mainService","settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}},"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"com.trl.sitemanagementfe.i18n.i18n","supportedLocales":[""]}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"com.trl.sitemanagementfe.view","async":true,"viewPath":"com.trl.sitemanagementfe.view"},"routes":[{"pattern":"","name":"Home","target":"Home"},{"name":"RouteView1","pattern":"View1","target":["TargetView1"]},{"name":"RouteView2","pattern":"View2","target":["TargetView2"]},{"name":"RouteView3","pattern":"View3","target":["TargetView3"]}],"targets":{"Home":{"id":"Home","viewName":"Home"},"TargetView1":{"id":"View1","name":"View1"},"TargetView2":{"id":"View2","name":"View2"},"TargetView3":{"id":"View3","name":"View3"}}},"rootView":{"viewName":"com.trl.sitemanagementfe.view.App","type":"XML","id":"App","async":true},"flexBundle":false},"sap.cloud":{"public":true,"service":"TSS_Site_Management"}}',
	"com/trl/sitemanagementfe/view/App.view.xml":'<mvc:View controllerName="com.trl.sitemanagementfe.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"com/trl/sitemanagementfe/view/Home.view.xml":'<mvc:View\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    controllerName="com.trl.sitemanagementfe.controller.Home"\n    displayBlock="true"\n><Page showHeader="true"><customHeader><Bar class="headerBarFix"><contentLeft><Image src="/images/logo.png" height="40px" class="siteLogo"/></contentLeft><contentMiddle><HBox width="90%" justifyContent="Center"><Text text="DASHBOARD" class="siteHeaderTitle"/></HBox></contentMiddle></Bar></customHeader><HBox\n            justifyContent="Start"\n            class="sapUiSmallMargin"\n        ><GenericTile\n                header="Site Configuration"\n                press=".onConfigurationPress"\n                class="sapUiTinyMargin card-tile"\n            ><TileContent><core:Icon\n                        src="sap-icon://key-user-settings"\n                        color="#3fb9ec"\n                        class="iconTile"\n                    /></TileContent></GenericTile><GenericTile\n                header="Production"\n                press=".onProductionPress"\n                class="sapUiTinyMargin card-tile"\n            ><TileContent><core:Icon\n                        src="sap-icon://factory"\n                        color="#3fb9ec"\n                        class="iconTile"\n                    /></TileContent></GenericTile><GenericTile\n                header="Temperature"\n                press=".onTemperaturePress"\n                class="sapUiTinyMargin card-tile"\n            ><TileContent><core:Icon\n                        src="sap-icon://temperature"\n                        color="#3fb9ec"\n                        class="iconTile"\n                    /></TileContent></GenericTile></HBox></Page></mvc:View>\n',
	"com/trl/sitemanagementfe/view/View1.view.xml":'<mvc:View\n    controllerName="com.trl.sitemanagementfe.controller.View1"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:layout="sap.ui.layout"\n    xmlns:core="sap.ui.core"\n><Page\n        showHeader="true"\n        class="sapUiContentPadding sitePageBackground"\n    ><VBox width="300px" class="sapUiSmallMarginBottom sapUiSmallMarginBegin"><Button\n                text=""\n                type="Back"\n                press=".onNavToHome"\n            /><Label text="Mode" /><ComboBox\n        id="modeSelector"\n        selectionChange="onModeChange"\n        width="100%"><items><core:Item key="create" text="Create New" /><core:Item key="maintain" text="Maintain" /></items></ComboBox></VBox><HBox\n            justifyContent="Start"\n            class="sapUiSmallMarginBottom sapUiSmallMarginBegin"\n        ><VBox width="300px"><Label text="Site ID" /><Input\n                    id="topName"\n                    change="onSiteIdChange"\n                    value="{/site_id}"\n                    valueHelpIconSrc="sap-icon://value-help"\n                    showValueHelp="true"\n                    valueHelpRequest="onSiteIdValueHelp"\n                /></VBox></HBox><customHeader><Bar class="headerBarFix"><contentLeft><Image\n                        id="imgLogo"\n                        src="/images/logo.png"\n                        height="40px"\n                        class="siteLogo"\n                    /></contentLeft><contentMiddle><HBox\n                        width="90%"\n                        justifyContent="Center"\n                    ><Text\n                            id="txtTitle"\n                            text="SITE CONFIGURATION"\n                            class="siteHeaderTitle"\n                        /></HBox></contentMiddle></Bar></customHeader><Panel\n            headerText="General Information"\n            class="whiteCard"\n        ><layout:Grid defaultSpan="L4 M6 S12"><VBox><Label text="Customer" /><ComboBox\n                        id="customer"\n                        selectedKey="{/customer}"\n                         width="100%" \n                    /></VBox><VBox><Label text="Location" /><ComboBox\n                        id="location"\n                        selectedKey="{/location}"\n                          width="100%" \n                    /></VBox><VBox><Label text="Runner ID" /><Input\n                        id="runnerId"\n                        value="{/runnerId}"\n                        change="onRunnerIdChange"\n                    /></VBox><VBox><Label text="No of House / Production Line" /><Input\n                        id="lineCount"\n                        type="Number"\n                        value="{/lineCount}"\n                        change="onLineCountChange"\n                    /></VBox></layout:Grid><HBox\n                justifyContent="End"\n                class="sapUiSmallMarginTop"\n            ></HBox></Panel><VBox\n            id="linesContainer"\n            width="100%"\n        /><HBox\n            justifyContent="End"\n            class="actionBar"\n        ><Button\n                id="btnSave"\n                text="Save"\n                type="Success"\n                press="onSave"\n            /></HBox></Page></mvc:View>',
	"com/trl/sitemanagementfe/view/View2.view.xml":'<mvc:View\n    controllerName="com.trl.sitemanagementfe.controller.View2"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:layout="sap.ui.layout"\n    xmlns:core="sap.ui.core"\n><Page\n        showHeader="true"\n        class="sapUiContentPadding sitePageBackground"\n    ><Button\n                text=""\n                type="Back"\n                press=".onNavToHome"\n            /><Panel\n            headerText="Search"\n            class="whiteCard"\n            expandable="false"\n        ><content><HBox\n                    width="100%"\n                    justifyContent="SpaceBetween"\n                    alignItems="End"\n                    wrap="Wrap"\n                ><VBox width="28%"><Label text="Site ID" required="true"/><Input\n                            id="siteId"\n                            placeholder="Enter Site ID"\n                            showValueHelp="true"\n                            liveChange="onSiteIdLiveChange" \n                            valueHelpRequest="onSiteIdValueHelp"\n                        /></VBox><VBox width="28%"><Label text="Production Line" required="true" /><Input\n                            id="ProductionLineId"\n                            placeholder="Enter Production Line"\n                            showValueHelp="true"\n                            liveChange="onProdLineLiveChange"\n                            valueHelpRequest="onProdLineValueHelp"\n                            editable="true"\n                        /></VBox><VBox width="28%"><Label text="Date" required="true" /><DatePicker\n                            id="siteDate"\n                            width="100%"\n                            valueFormat="yyyy-MM-dd"\n                            displayFormat="dd-MM-yyyy"\n                        /></VBox><VBox width="8%"><Label text=" " /><Button\n                            text="Find"\n                            type="Emphasized"\n                            width="100%"\n                            press="onFindPress"\n                        /></VBox></HBox></content></Panel><customHeader><Bar class="headerBarFix"><contentLeft><Image\n                        src="/images/logo.png"\n                        height="40px"\n                        class="siteLogo"\n                    /></contentLeft><contentMiddle><HBox\n                        width="90%"\n                        justifyContent="Center"\n                    ><Text\n                            text="PRODUCTION"\n                            class="siteHeaderTitle"\n                        /></HBox></contentMiddle></Bar></customHeader><Panel\n            headerText="General Information"\n            class="whiteCard"\n        ><layout:Grid\n                defaultSpan="L4 M6 S12"\n                hSpacing="1"\n                vSpacing="1"\n            ><VBox><Label text="Customer" /><Input\n                        value="{view>/siteMaster/customer_name}"\n                        editable="false"\n                    /></VBox><VBox><Label text="Location" /><Input\n                        value="{view>/siteMaster/location}"\n                        editable="false"\n                    /></VBox><VBox><Label text="Runner ID" /><Input\n                        value="{view>/siteMaster/runner_id}"\n                        editable="false"\n                    /></VBox><VBox><Label text="Campaign No" /><Input\n                        value="{view>/campinfo/campaign_no}"\n                        editable="false"\n                    /></VBox><VBox><Label text="Repair Status" /><Input\n                        value="{view>/campinfo/repair_status}"\n                        editable="false"\n                    /></VBox><VBox><Label text="Minor Repair Status" /><Input\n                        value="{view>/campinfo/minor_repair_status}"\n                        type="Number"\n                        editable="false"\n                    /></VBox></layout:Grid></Panel><VBox\n            id="linesContainer"\n            width="100%"\n            class="sapUiSmallMarginTop"\n        /><Panel\n            headerText="Additional Info"\n            class="whiteCard"\n            expandable="false"\n        ><layout:Grid\n                defaultSpan="L12 M12 S12"\n                width="100%"\n            ><HBox\n                    width="100%"\n                    alignItems="Center"\n                ><VBox width="20%"><Label text="Remark" /></VBox><VBox width="80%"><Input\n                            width="100%"\n                            id="remark"\n                            editable="{view>/isProductionEditable}"\n                        /></VBox></HBox></layout:Grid></Panel><HBox\n            class="actionBar"\n            style="margin-top:1rem;"\n            justifyContent="SpaceBetween"\n        ><Button\n                text="Submit"\n                type="Success"\n                press=".onSubmit"\n                class="sapUiTinyMarginBegin"\n                visible="{view>/isProductionEditable}"\n            /><ToolbarSpacer /><Button\n                text="Save as Draft"\n                type="Emphasized"\n                press=".onSave"\n                class="sapUiTinyMarginBegin"\n                visible="{view>/isProductionEditable}"\n            /></HBox></Page></mvc:View>\n\n',
	"com/trl/sitemanagementfe/view/View3.view.xml":'<mvc:View\n    controllerName="com.trl.sitemanagementfe.controller.View3"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:layout="sap.ui.layout"\n    xmlns:core="sap.ui.core"\n><Page\n        showHeader="true"\n        class="sapUiContentPadding sitePageBackground"\n    ><customHeader><Bar class="headerBarFix"><contentLeft><Image\n                        src="/images/logo.png"\n                        height="40px"\n                        class="siteLogo"\n                    /></contentLeft><contentMiddle><HBox\n                        width="90%"\n                        justifyContent="Center"\n                    ><Text\n                            text="TEMPERATURE"\n                            class="siteHeaderTitle"\n                        /></HBox></contentMiddle></Bar></customHeader><Button\n                text=""\n                type="Back"\n                press=".onNavToHome"\n            /><Panel\n            headerText="Search"\n            class="whiteCard"\n            expandable="false"\n        ><content><HBox\n                    width="100%"\n                    justifyContent="SpaceBetween"\n                    alignItems="End"\n                    wrap="Wrap"\n                ><VBox width="25%"><Label\n                            text="Site ID"\n                            required="true"\n                        /><Input\n                            id="siteId"\n                            placeholder="Enter Site ID"\n                            showValueHelp="true"\n                            liveChange="onSiteIdLiveChange"\n                            valueHelpRequest="onSiteIdValueHelp"\n                        /></VBox><VBox width="25%"><Label\n                            text="Production Line"\n                            required="true"\n                        /><Input\n                            id="ProductionLineId1"\n                            placeholder="Enter Production Line"\n                            showValueHelp="true"\n                            liveChange="onProdLineLiveChange"\n                            valueHelpRequest="onProdLineValueHelp"\n                        /></VBox><VBox width="25%"><Label\n                            text="Date"\n                            required="true"\n                        /><DatePicker\n                            id="siteDate1"\n                            width="100%"\n                            valueFormat="yyyy-MM-dd"\n                            displayFormat="dd-MM-yyyy"\n                        /></VBox><VBox justifyContent="End"><Label\n                            text="Shift"\n                            required="true"\n                        /><Select\n                            selectedKey="{formData>/shift}"\n                            forceSelection="true"\n                            editable="true"\n                            id="shiftSelect"\n                        ><items><core:Item\n                                    key="A"\n                                    text="A"\n                                /><core:Item\n                                    key="B"\n                                    text="B"\n                                /><core:Item\n                                    key="C"\n                                    text="C"\n                                /></items></Select></VBox><VBox width="8%"><Label text=" " /><Button\n                            text="Find"\n                            type="Emphasized"\n                            width="100%"\n                            press="onFindPress"\n                        /></VBox></HBox></content></Panel><Panel\n            headerText="General Information"\n            class="whiteCard"\n        ><layout:Grid\n                defaultSpan="L4 M6 S12"\n                hSpacing="1"\n                vSpacing="1"\n            ><VBox><Label text="Customer" /><Input\n                        value="{formData>/siteMaster/customer_name}"\n                        editable="false"\n                    /></VBox><VBox><Label text="Location" /><Input\n                        value="{formData>/siteMaster/location}"\n                        editable="false"\n                    /></VBox><VBox><Label text="Runner ID" /><Input\n                        value="{formData>/siteMaster/runner_id}"\n                        editable="false"\n                    /></VBox><VBox><Label text="Campaign No" /><Input\n                        value="{formData>/campinfo/campaign_no}"\n                        editable="false"\n                    /></VBox><VBox><Label text="Repair Status" /><Input\n                        value="{formData>/campinfo/repair_status}"\n                        editable="false"\n                    /></VBox><VBox><Label text="Minor Repair Status" /><Input\n                        value="{formData>/campinfo/minor_repair_status}"\n                        type="Number"\n                        editable="false"\n                    /></VBox></layout:Grid></Panel><VBox\n            id="linesContainer"\n            class="sapUiMediumMargin"\n        /><HBox\n            class="actionBar"\n            style="margin-top:1rem;"\n            justifyContent="SpaceBetween"\n        ><Button\n                text="Submit"\n                type="Success"\n                press=".onSubmit"\n                class="sapUiTinyMarginBegin"\n                visible="{formData>/isSensorEditable}"\n            /><ToolbarSpacer /><Button\n                text="Save as Draft"\n                type="Emphasized"\n                press=".onSave"\n                class="sapUiTinyMarginBegin"\n                visible="{formData>/isSensorEditable}"\n            /></HBox></Page></mvc:View>\n'
});
//# sourceMappingURL=Component-preload.js.map
